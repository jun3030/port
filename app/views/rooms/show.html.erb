<h1>DM</h1>

<h4>参加者</h4>
<% @entries.each do |e| %>
  <h5><strong><a href="/users/<%= e.user.id %>/edit_mypage"><%= e.user.name%>さん</a></strong></h5>
<% end %>

<hr>

<div class="message-room-flex">
  <% if @messages.present? %>
  <% @entries.each do |entry| %>
    <% if entry.user == current_user  %> <!-- 自分の情報は左側に表示 -->
    <div class="room-image">
      <%= image_tag entry.user.image, :size => "40" %>
    </div>
    
    <div class="room-user-name">
      <%= entry.user.name %>
    </div>
    
    <div class="message-create">
    <% @messages.each do |message| %>
      <% if message.user == current_user %>
        <%= message.content %>
      <% end %>
    <% end %>
    </div>
    <hr>
    
    
    <% else %>　<!-- 相手の情報は右側に表示 -->
    
    
    <div class="room-image">
      <%= image_tag entry.user.image, :size => "40" %>
    </div>
    
    <div class="room-user-name">
      <%= entry.user.name %>
    </div>
    
    <div class="message-create">
    <% @messages.each do |message| %>
      <% if message.user == !current_user %>
        <%= message.content %>
      <% end %>
    <% end %>
    </div>
    
    <hr>
    
    
    <% end %>
  <% end %>
  
  <% else %> <!-- if @messages.present? -->
    <h3 class="text-center">メッセージはまだありません</h3>
  <% end %>  <!-- if @messages.present? -->
</div>  

<%= form_for @message do |f| %>
  <%= f.text_field :content, :placeholder => "メッセージを入力して下さい" , :size => 70 %> <!-- :placeholderはvalueのこと テキスト入力欄に最初から入っている文字のこと -->
  <%= f.hidden_field :room_id, :value => @room.id %>
  <br>
  <%= f.submit "投稿する" %>
<% end %>

<%= link_to "投稿一覧へ戻る", posts_index_path %>
